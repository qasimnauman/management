@page "/taskmanagement"
@using System.Collections.Generic

@* Task Management Page *@
<div class="container mt-4">
    <h3>Task Management</h3>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <input type="text" class="form-control w-25" placeholder="Search By Team" aria-label="Search By Team">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                Search By
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <li><a class="dropdown-item" href="#">Search By Task Status</a></li>
                <li><a class="dropdown-item" href="#">Search By Assignee</a></li>
            </ul>
        </div>
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Task Title</th>
                <th>Due Date</th>
                <th>Completion Date</th>
                <th>Assignee</th>
                <th>Team Name</th>
                <th>Team Lead</th>
                <th>Status</th>
                <th>View</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var task in Tasks)
            {
                <tr>
                    <td>@task.TaskTitle</td>
                    <td>@task.DueDate.ToShortDateString()</td>
                    <td>@task.CompletionDate.ToShortDateString()</td>
                    <td>@task.Assignee</td>
                    <td>@task.TeamName</td>
                    <td>@task.TeamLead</td>
                    <td>
                        <span class="badge @GetStatusClass(task.Status)">@task.Status</span>
                    </td>
                    <td>
                        <button class="btn btn-link">
                            <i class="bi bi-eye"></i>
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    // Task Model
    public class Task
    {
        public string TaskTitle { get; set; }
        public DateTime DueDate { get; set; }
        public DateTime CompletionDate { get; set; }
        public string Assignee { get; set; }
        public string TeamName { get; set; }
        public string TeamLead { get; set; }
        public string Status { get; set; }
    }

    // Sample Data
    private List<Task> Tasks = new List<Task>
    {
        new Task { TaskTitle = "Website Development", DueDate = new DateTime(2025, 1, 23), CompletionDate = new DateTime(2025, 6, 24), Assignee = "Ali", TeamName = "Web Team", TeamLead = "Harish", Status = "Completed" },
        new Task { TaskTitle = "Design Deployment", DueDate = new DateTime(2025, 1, 24), CompletionDate = new DateTime(2025, 2, 22), Assignee = "Imran", TeamName = "Design Team", TeamLead = "Shahzeb", Status = "InProgress" },
        new Task { TaskTitle = "App Development", DueDate = new DateTime(2025, 1, 25), CompletionDate = new DateTime(2025, 4, 17), Assignee = "Ahmed", TeamName = "Development Team", TeamLead = "Hassim", Status = "To-Do" },
        new Task { TaskTitle = "App Screenshots", DueDate = new DateTime(2025, 1, 26), CompletionDate = new DateTime(2025, 7, 16), Assignee = "Talha", TeamName = "Design Team", TeamLead = "Amjad", Status = "Blocked" },
        new Task { TaskTitle = "App Optimization", DueDate = new DateTime(2025, 1, 27), CompletionDate = new DateTime(2025, 8, 10), Assignee = "Taimoor", TeamName = "Marketing Team", TeamLead = "Noorlan", Status = "Completed" },
        new Task { TaskTitle = "App Designing", DueDate = new DateTime(2025, 1, 28), CompletionDate = new DateTime(2025, 4, 29), Assignee = "Saqib", TeamName = "Design Team", TeamLead = "Shahzad", Status = "InProgress" }
    };

    // Get Bootstrap badge class based on status
    private string GetStatusClass(string status)
    {
        return status switch
        {
            "Completed" => "bg-success",
            "InProgress" => "bg-primary",
            "To-Do" => "bg-warning text-dark",
            "Blocked" => "bg-danger",
            _ => "bg-secondary"
        };
    }
}
